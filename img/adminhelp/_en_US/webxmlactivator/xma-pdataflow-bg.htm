<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<META NAME="bookrevnum" CONTENT="LLESWBS100500-1409-H-AGD-EN-01">
<META name="pvScheme" content="010203-yymm">
<META name="verttl" content="10.5.0 Update 2014-09">
<META name="PiXprocLocator" content="websystemobj">
<META mancondkey="llesels-h-ugd -- lleselv-h-agd -- llescor-igd -- lleswbb-h-ugd -- llescf-cfp -- llesels-h-agd -- llesrt-h-ugd -- llesapp-h-ugd -- llescl-h-agd -- lleswbo-h-agd -- lleswbb-h-agd -- lleswba-h-agd -- llesrec-h-agd"><title>Creating an XML Activator Producer Data Flow</title>
<META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.44">
<META NAME="SECTLVL" CONTENT="2">
<LINK REL="STYLESHEET" TYPE="text/css" HREF="../../ix21.css">

<script language="JavaScript" src="../../llhelp.js"></script>
</HEAD>
<body ONLOAD="checkFrame( 'xma-pdataflow-bg.htm' )" CLASS="Body" TEXT="#000000" BGCOLOR="#FFFFFF" link="#003366" alink="#3300FF" vlink="#660033" background="../../images/pattern.gif">

<DIV ID="HL4SRCH">
<DIV CLASS="pagecontent" ID="PAGECONTENT">
<!-- header -->
  <script language="JavaScript">
          var header = new AdminHeader("../../images/");
          header.title1 = 'Creating Indexes Using Templates';
          header.title2 = 'Creating an XML Activator Producer Data Flow';
           header.draw();
  </script>

<P class="nr1"><A NAME="TMPID558"></A>You create an XML Activator Producer data flow to index information generated by a third-party application so that Content Server users can query the indexed information and view the results in Content Server.</P>
<P><A NAME="TMPID561"></A>This procedure creates and sets up an entire data flow, including an XML Activator Producer process, a Document Conversion process, and an Update Distributor process. You can also create a data flow and <A href="../websystemobj/wbs-addanyprocs-bg.htm">Adding Data Flow Processes</A>.</P>
<P><A NAME="TMPID563"></A>There are four steps involved in creating an XML Activator Producer data flow.</P>
<P CLASS="bridgehead-boldpara"><A NAME="TMP4REF13">Setting up an XML Activator Producer Data Flow</A></P>
<P><A NAME="TMPID565"></A>You begin setting up an XML Activator Producer data flow by naming it and specifying the port numbers on which its processes listen. You then configure the XML Activator Producer process information. The XML Activator Producer process extracts data, in the form of XML files, from your third-party application and writes it to a data interchange pool (IPool).</P>
<P><A NAME="TMPID566"></A>When you add an XML Activator Producer data flow to Content Server, you can specify the name of the operation and identifier tags that can appear in the <A href="../webxmlactivator/xma-xmlapi-rf.htm">Requirements for XML Activator Files</A> that pass through the data flow. The operation tag specifies the action that Content Server performs with the data. The identifier tag is a persistent and unique string that identifies the data object (the content included in a particular XML file).</P>
<P><A NAME="TMPID570"></A>When specifying directories on the Create New XML Activator Producer Data Flow page, you must specify the directory paths as they are mapped or mounted on the host of the Admin server whose shortcut you choose in the <B CLASS="guilabel">Host</B> drop-down list.</P>
<P CLASS="bridgehead-boldpara"><A NAME="TMP4REF14">Configuring Document Conversion information</A></P>
<P><A NAME="TMPID573"></A>After you set up an XML Activator Producer data flow and configure the XML Activator Producer process, you must configure the intermediate Document Conversion information. The Document Conversion process reads data from an IPool, converts the data to HTML, and then writes it to a different IPool.</P>
<P><A NAME="TMPID574"></A>When specifying the read and write directories for the Document Conversion process, you must specify the directory paths as they are mapped/mounted on the host of the Admin server whose shortcut you select in the <B CLASS="guilabel">Host</B> drop-down list.</P>
<P CLASS="bridgehead-boldpara"><A NAME="TMP4REF15">Configuring Index Update Information</A></P>
<P><A NAME="TMPID577"></A>After you set up an XML Activator Producer data flow and configure the XML Activator Producer and Document Conversion processes, you must configure the Update Distributor. For more information about configuring index updating processes, see <span><A href="../websystemobj/wbs-configindexeng-so.htm">Configuring Indexing Processes</A></span>.</P>
<P><A NAME="TMPID579"></A>When specifying the read and index directories for the index updating process, you must specify the directory paths as they are mapped/mounted on the host of the Admin server whose shortcut you select in the <B CLASS="guilabel">Host</B> drop-down list.</P>
<P CLASS="bridgehead-boldpara"><A NAME="TMP4REF16">Completing an XML Activator Producer Data Flow</A></P>
<P><A NAME="TMPID582"></A>After you set up an XML Activator Producer data flow, configure the XML Activator Producer, Document Conversion, and Update Distributor processes, you can complete the XML Activator Producer data flow.</P>
<table CLASS="note">
<TR>
<TD FRAME="VOID" CLASS="tabverspace" COLSPAN="2">&nbsp;</TD></TR>
<TR FRAME="VOID">
<TD ALIGN="LEFT" VALIGN="TOP" CLASS="iconcell">
<P CLASS="note"><A NAME="TMP4REF17"></A><IMG ALT="Note" SRC="../../images/pi_note.gif"></IMG></P></TD>
<TD ALIGN="LEFT" CLASS="percontscell">
<P><A NAME="TMPID584"></A><B CLASS="note">Note: </B><BR>If you place an XML Activator Producer process directly before the HTML Conversion process in a data flow, null values in content data are not encoded, and process error 54 is generated.</P></TD></TR>
<TR>
<TD FRAME="VOID" CLASS="tabverspace" COLSPAN="2">&nbsp;</TD></TR></table>
<P CLASS="bridgehead-boldpara"><A NAME="TMP4REF18">Creating an XML Activator Consumer Data Flow</A></P>
<P><A NAME="TMPID586"></A>The XML Activator Consumer processes an IPool, creating an output file for each object encountered. The Activator processes the IPool in transactional batches of approximately 1,000 objects, creating a new subdirectory for each batch.</P>
<P><A NAME="TMPID587"></A>Each subdirectory is named according to the format: <TT CLASS="literal">ll_%YY%MM%%DD_%HH%%MM%%SS_N</TT>, where <TT CLASS="literal">YY</TT> is year, <TT CLASS="literal">MM</TT> is month, <TT CLASS="literal">DD</TT> is day, <TT CLASS="literal">HH</TT> is hour, <TT CLASS="literal">MM</TT> is minute, and <TT CLASS="literal">SS</TT> is the second when the Activator was started, and <TT CLASS="literal">N</TT> is a left-padded 6 digit  number starting at <TT CLASS="literal">000000</TT>.</P>
<P><A NAME="TMPID597"></A>Each subdirectory contains files named <TT CLASS="literal">N.xml,</TT> where <TT CLASS="literal">N</TT> is a left-padded 3 digit number.</P>
<P><A NAME="TMPID600"></A>A third-party process is expected to process all directories and files in either lexicographic or modified-time based order. The third-party process only processes files named <TT CLASS="literal">*.xml</TT>. The last directory which is still in a transaction contains files that are named <TT CLASS="literal">*.tmp</TT>, which are renamed when the transaction ends. The third-party process is expected to clean up directories containing only <TT CLASS="literal">*.xml</TT> files as it processes them. The Activator will clean up the <TT CLASS="literal">*.tmp</TT> files on failed transactions.</P>
<P><A NAME="TMPID605"></A>Each file produced is in UTF-8 XML format, and closely mirrors the content of an IPool object message. An IPool object message contains an operation which specifies either <TT CLASS="literal">AddORReplace</TT> or <TT CLASS="literal">Delete</TT>, a URN specifying a unique name for the object, and one or more metadata and content regions intermixed. The metadata regions are nested key/value pairs. They are almost XML, except for data added by some poorly behaved modules (mostly Workflow). The content regions contain either text or binary data.</P>
<P><A NAME="TMPID608"></A>The XML file produced keeps as much of the original metadata structure as possible. When a region of metadata text violates the XML specification, the closest enclosing tag is marked as having <TT CLASS="literal">base64</TT> encoded data. The third-party process determines how to handle the badly formed metadata.</P>
<P><A NAME="TMPID610"></A>The content region is always <TT CLASS="literal">base64</TT> encoded.</P>
<P><A NAME="TMPID612"></A>Each XML file produced has the format:</P><A NAME="AEN624"></A>
<PRE 
CLASS="screen"
>  &lt;?xml version="1.0"?&gt;
    &lt;xml_object&gt;
        &lt;operation&gt;AddOrReplace or Delete&lt;/operation&gt;
        &lt;oturn encoding='base64'&gt;base64 encoded urn&lt;/oturn&gt;
        &lt;metadata&gt;
           &lt;field1&gt;....&lt;/field1&gt;
           &lt;field2 encoding='base64'&gt;...&lt;/field2&gt;
           &lt;field3&gt;...&lt;/field3&gt;
           ...
           &lt;fieldN encoding='base64'&gt;...&lt;/fieldN&gt;
        &lt;/metadata&gt;
        &lt;content encoding='base64'&gt;
           Base64 encoded content.
        &lt;/content&gt;
        &lt;metadata&gt;
           ...
        &lt;/metadata&gt;
        &lt;content&gt;
        ...
        &lt;/content&gt;
       ...
    &lt;/xml_object&gt;</PRE
>
<DIV CLASS="localtoc">
<h2 CLASS="localtoc BH1SEP pagehd"><A NAME="LOCALTOC"></A>Table of Contents&nbsp;&nbsp;</h2>
<ul>
<li><p><A  href="../webxmlactivator/xma-setupxmlactdflw-p.htm" revision="">To Set Up an XML Activator Producer Data Flow</A></p></li>
<li><p><A  href="../webxmlactivator/xma-configdocconv-p.htm" revision="">To Configure Document Conversion Information</A></p></li>
<li><p><A  href="../webxmlactivator/xma-configindinfo-p.htm" revision="">To Configure Index Update Information</A></p></li>
<li><p><A  href="../webxmlactivator/xma-compxmlactdflw-p.htm" revision="">To Complete an XML Producer Data Flow</A></p></li></ul></DIV>
<P ALIGN="RIGHT"></P></DIV></DIV>

  <script language="JavaScript">
       new AdminFooter("../../images/").draw();
  </script>
</body></HTML>