<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<META NAME="bookrevnum" CONTENT="LLESWBS100500-1409-H-AGD-EN-01">
<META name="pvScheme" content="010203-yymm">
<META name="verttl" content="10.5.0 Update 2014-09">
<META name="PiXprocLocator" content="websystemobj">
<META mancondkey="llesels-h-ugd -- lleselv-h-agd -- llescor-igd -- lleswbb-h-ugd -- llescf-cfp -- llesels-h-agd -- llesrt-h-ugd -- llesapp-h-ugd -- llescl-h-agd -- lleswbo-h-agd -- lleswbb-h-agd -- lleswba-h-agd -- llesrec-h-agd"><title>Verifying Content and Re-indexing</title>
<META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.44">
<META NAME="SECTLVL" CONTENT="2">
<LINK REL="STYLESHEET" TYPE="text/css" HREF="../../ix21.css">

<script language="JavaScript" src="../../llhelp.js"></script>
</HEAD>
<body ONLOAD="checkFrame( 'ota-verifyandreindex-bg.htm' )" CLASS="Body" TEXT="#000000" BGCOLOR="#FFFFFF" link="#003366" alink="#3300FF" vlink="#660033" background="../../images/pattern.gif">

<DIV ID="HL4SRCH">
<DIV CLASS="pagecontent" ID="PAGECONTENT">
<!-- header -->
  <script language="JavaScript">
          var header = new AdminHeader("../../images/");
          header.title1 = 'Maintaining Indexes';
          header.title2 = 'Verifying Content and Re-indexing';
           header.draw();
  </script>

<P class="nr1"><A NAME="TMPID10728"></A>Verifying the contents of the Enterprise index checks whether the index contents match the contents of the Content Server database, and then gives you an opportunity to re-extract missing objects. Re-extracting the data from the source updates out-of-date objects and adds missing objects to the index. Purging the data flow and reconstructing the index removes all pending objects from the data flow, empties all index partitions, and then repopulates the partitions with data by issuing a re-extract command.</P>
<table CLASS="note">
<TR>
<TD FRAME="VOID" CLASS="tabverspace" COLSPAN="2">&nbsp;</TD></TR>
<TR FRAME="VOID">
<TD ALIGN="LEFT" VALIGN="TOP" CLASS="iconcell">
<P CLASS="note"><A NAME="TMP4REF197"></A><IMG ALT="Note" SRC="../../images/pi_note.gif"></IMG></P></TD>
<TD ALIGN="LEFT" CLASS="percontscell">
<P><A NAME="TMPID10731"></A><B CLASS="note">Note: </B><BR>Before re-extracting an Enterprise or non-Enterprise data source, ensure that all processes in the corresponding data flow are scheduled or running. If a process is idle, it will not be automatically restarted after the re-extraction occurs.</P></TD></TR>
<TR>
<TD FRAME="VOID" CLASS="tabverspace" COLSPAN="2">&nbsp;</TD></TR></table>
<table CLASS="warning">
<TR>
<TD FRAME="VOID" CLASS="tabverspace" COLSPAN="2">&nbsp;</TD></TR>
<TR FRAME="VOID">
<TD ALIGN="center" VALIGN="top" CLASS="iconcell">
<P CLASS="warning" ALIGN="CENTER"><IMG ALT="Warning" SRC="../../images/pi_warning.gif"></IMG></P></TD>
<TD ALIGN="LEFT" CLASS="percontscell">
<P><A NAME="TMPID10734"></A><B CLASS="warning">Warning</B><BR>For extremely large indexes, re-extraction may take considerable time.</P></TD></TR>
<TR>
<TD FRAME="VOID" CLASS="tabverspace" COLSPAN="2">&nbsp;</TD></TR></table>
<P CLASS="bridgehead-boldpara"><A NAME="TMP4REF198">Enterprise Data Sources</A></P>
<P class="before-ul"><A NAME="TMPID10736"></A>If you perform searches and the results suggest that the Enterprise index may be incomplete or out-of-date, you can verify whether the contents of the index match the actual contents of the Content Server database. To verify the contents of an index, Content Server counts the entries in the Content Server database and compares that number to the number of objects in the index. Content Server then generates an index verification report that lists the following information:</P><A NAME="AEN10020"></A>
<UL>
<LI class="vlli">
<P class="nr1"><A NAME="AEN10021"></A><A NAME="TMPID10743"></A>The date and time when the index verification started</P></LI>
<LI class="vlli">
<P class="nr1"><A NAME="AEN10023"></A><A NAME="TMPID10745"></A>The date and time when the index verification stopped</P></LI>
<LI class="vlli">
<P class="nr1"><A NAME="AEN10025"></A><A NAME="TMPID10747"></A>The total number of objects processed</P></LI>
<LI class="vlli">
<P class="nr1"><A NAME="AEN10027"></A><A NAME="TMPID10749"></A>The total number of objects that exist in the index</P></LI>
<LI class="vlli">
<P class="nr1"><A NAME="AEN10029"></A><A NAME="TMPID10751"></A>The number of missing objects (that is, objects that are in the database, but not in the index)</P></LI>
<LI class="vlli">
<P class="nr1"><A NAME="AEN10031"></A><A NAME="TMPID10753"></A>The number of out-of-date objects (objects that are in both the database and the index, but not up-to-date in the index) </P></LI>
<LI class="vlli">
<P class="nr1"><A NAME="AEN10033"></A><A NAME="TMPID10755"></A>The number of objects that have an update pending (objects are in both the database and the index, and are not up-to-date in the index, but an index update is scheduled to be performed by a regular process)</P></LI>
<LI class="vlli">
<P class="nr1"><A NAME="AEN10035"></A><A NAME="TMPID10757"></A>A message notifying you of the status of the index verification</P></LI></UL>
<P><A NAME="TMPID10758"></A>If the index verification operation confirms that objects in the database are missing from the index, you can re-extract the missing objects right away.</P>
<P><A NAME="TMPID10759"></A>If you suspect that the current version of the Enterprise index is corrupt, you can restore a previous version, provided you have backed it up. For more information about backing up and restoring indexes, see <span><A href="../otadmin/ota-ibrbackupoverview-so.htm">Backing Up and Restoring Indexes</A></span>. Alternatively, you can re-extract all the data from its source, which is the Content Server database. You can re-extract all data from the Content Server database to correct inaccuracies, or purge the Enterprise index, and then re-extract all data from the Content Server database to rebuild the index completely.</P>
<P><A NAME="TMPID10764"></A>If you purge the data flow and then re-extract the data from its source, the index's regions settings are reset. This means that the settings you have configured for index regions' display names or search options (queryable, displayable, or search by default) will be lost. For more information about configuring index regions, see <span><A href="../webotcindex/wbo-toconfighypmap01-rf.htm">Configuring a Hyperlink Mapping Example</A></span>. OpenText recommends that you take note of index regions settings so that you can reset their values after purging and re-indexing the data source.</P>
<table CLASS="note">
<TR>
<TD FRAME="VOID" CLASS="tabverspace" COLSPAN="2">&nbsp;</TD></TR>
<TR FRAME="VOID">
<TD ALIGN="LEFT" VALIGN="TOP" CLASS="iconcell">
<P CLASS="note"><A NAME="TMP4REF199"></A><IMG ALT="Note" SRC="../../images/pi_note.gif"></IMG></P></TD>
<TD ALIGN="LEFT" CLASS="percontscell">
<P><A NAME="TMPID10768"></A><B CLASS="note">Note: </B><BR>If your Enterprise index is spread across multiple Enterprise data sources, you must perform the verification or re-indexing operation on all Enterprise data sources.</P></TD></TR>
<TR>
<TD FRAME="VOID" CLASS="tabverspace" COLSPAN="2">&nbsp;</TD></TR></table>
<P CLASS="bridgehead-subheading3"><A NAME="TMP4REF200">Notification and Auditing</A></P>
<P><A NAME="TMPID10770"></A>You can configure Content Server so that you can track purge and re-extract commands for Enterprise Data Sources through system alert emails or auditing.</P>
<P><A NAME="TMPID10772"></A>If you have enabled Notification, and error checking and email delivery, Content Server will deliver a system alert email each time a purge or re-extract command has been made for an Enterprise data source. For information about enabling error checking and email delivery, see <span><A href="../websovmgmt/sov-cnfsoaed-bg.htm">Enabling Error-Checking and E-Mail Delivery</A></span>.</P>
<P><A NAME="TMPID10775"></A>You can also set Enterprise data source purge and re-extract commands as auditing interests.</P>
<P CLASS="bridgehead-subheading2 BH2SEP"><A NAME="TMP4REF201">Non-Enterprise Data Sources</A></P>
<P><A NAME="TMPID10777"></A>When you create a non-Enterprise index (for example, a Directory Walker index), you build a data flow that extracts and indexes data from its original data source (for example, a local directory or a Web site). If you want to re-index the data at any time, you can purge the data flow, re-extract the data from its original data source, or do both. You re-index data when you suspect that the contents of an index are corrupt. If you purge the data flow and then re-extract the data from its source, the index's regions settings are reset. This means that the settings you configure for index regions' display names or search options (queryable, displayable, or search by default) will be lost. For more information about configuring index regions, see <span><A href="../webotcindex/wbo-toconfighypmap01-rf.htm">Configuring a Hyperlink Mapping Example</A></span>. OpenText recommends that you take note of index regions settings so that you can reset their values after purging and re-indexing the data source.</P>
<P><A NAME="TMPID10780"></A>If you want to re-index the data in an XML Activator Producer data source, you copy the original data that has been indexed by the XML Activator Producer data source from the third-party application into the XML Activator Producer process's incoming directory. This allows the XML Activator Producer process to reconstruct its index from the original third-party data. For more information about XML Activator data flows, see <span><A href="../webxmlactivator/xma-pdataflow-bg.htm">Creating an XML Activator Producer Data Flow</A></span>.</P>
<P CLASS="bridgehead-boldpara"><A NAME="TMP4REF202">Control Rules and Re-indexing</A></P>
<P><A NAME="TMPID10783"></A>When running control rules for capacity-based and date-based partition creation, Content Server creates new partitions and steps down the modes of old partitions if you have configured the rules accordingly. Because Content Server cannot update partitions in Read-Only mode, re-extracting the data from the source will not work properly in these cases unless all Read-Only partitions have been set to Update-Only first. You must also have at least one Read-Write partition into which Content Server can add missing objects.</P>
<table CLASS="warning">
<TR>
<TD FRAME="VOID" CLASS="tabverspace" COLSPAN="2">&nbsp;</TD></TR>
<TR FRAME="VOID">
<TD ALIGN="center" VALIGN="top" CLASS="iconcell">
<P CLASS="warning" ALIGN="CENTER"><IMG ALT="Warning" SRC="../../images/pi_warning.gif"></IMG></P></TD>
<TD ALIGN="LEFT" CLASS="percontscell">
<P><A NAME="TMPID10788"></A><B CLASS="warning">Warning</B><BR>When you change a partition to Read-Only, the Index Engine for that partition shuts itself down and will not index any items that are either updated or deleted.</P></TD></TR>
<TR>
<TD FRAME="VOID" CLASS="tabverspace" COLSPAN="2">&nbsp;</TD></TR></table>
<P><A NAME="TMPID10789"></A>Similarly, because Content Server cannot delete partitions in Read-Only and Update-Only modes, purging the Enterprise index and re-extracting data from the Content Server database to rebuild the index will not work properly in these cases without preparatory actions, which depend on the control rules in your system. After the preparatory actions have been taken, the process of rebuilding the index creates partitions as defined in the partition creation control rules. For example, if a date-based partition creation rule specifies for a new partition to be created after every calendar month of data, then as Content Server rebuilds the index from the oldest object to the newest, it creates a new partition for every calendar month of data. For more information about control rules, see <span><A href="../websystemobj/wbs-admincntrlrls-so.htm">Administering Control Rules</A></span>.</P>
<P><A NAME="TMPID10794"></A>The Search Engine supports a partition in <I CLASS="emphasis">Retired</I> mode. This mode is an alternative to Update, Read/Write or ReadOnly modes. In Retired mode, an index will accept updates and deletions, but not new objects. In addition, a complete replacement of an object in Retired mode will rebalance the object to another partition and delete it from the original partition.</P>
<P CLASS="bridgehead-subheading2 BH2SEP"><A NAME="TMP4REF203">Updating Search Configuration Files</A></P>
<P><A NAME="TMPID10797"></A>With a new installation of Content Server, the latest versions of several search configuration files are available. These files change occasionally to improve the performance and efficiency of the search engine, or to tune the behavior of  the DCS. If you have upgraded from an older version of Content Server or applied an Update to Content Server, these new files are not used. Instead, your existing configuration files are retained for compatibility.</P>
<P class="before-ul"><A NAME="TMPID10800"></A>If you are performing a purge and re-index operation, this is a good time to review  your old configuration files and potentially replace them with newer configuration files. Once you have an existing index, changing these files is not always possible. One source for new configuration files is the <TT CLASS="literal">Content Server_home\config\reference</TT> directory for your version of Content Server. In particular, you should consider the following configuration files located in the &lt;OTHOME&gt;\config directory:</P><A NAME="AEN10083"></A>
<UL>
<LI class="vlli">
<P class="nr1"><A NAME="AEN10084"></A><A NAME="TMPID10806"></A><TT CLASS="literal">dcs.ini</TT></P></LI>
<LI class="vlli">
<P class="nr1"><A NAME="AEN10087"></A><A NAME="TMPID10809"></A><TT CLASS="literal">LLFieldDefinitions.txt</TT></P></LI>
<LI class="vlli">
<P class="nr1"><A NAME="AEN10090"></A><A NAME="TMPID10812"></A><TT CLASS="literal">LLFieldDefinitions_EL.txt</TT></P></LI></UL>
<P><A NAME="TMPID10814"></A>You may also want to modify these files to meet any specific requirements you may have. If changing the files, you should first disable the Extractor and ensure there are no IPool messages waiting for processing. Then modify the files, perform the Purge and re-index operation, and enable the Extractor to build a new index with the updated settings.</P>
<P><A NAME="TMPID10815"></A>The following table describes the preparatory actions that you must take before purging the data flow and re-extracting the data from its source, depending on the control rules that you have set up for the data source.</P>
<DIV title="Preparatory Actions Reference Table" CLASS="table">
<P CLASS="table" ALIGN="LEFT"><A NAME="PREPACTIONS"></A><B>Table 1-12: Preparatory Actions Reference Table</B></P>
<TABLE BORDER="1" CELLSPACING="0" CELLPADDING="4" CLASS="table">
<TR SCOPE="ROW" STYLE="CONTSROW">
<TH SCOPE="COL" ALIGN="LEFT" VALIGN="TOP">Control Rule</TH>
<TH SCOPE="COL" ALIGN="LEFT" VALIGN="TOP">Preparatory Actions</TH></TR>
<TR SCOPE="ROW" STYLE="CONTSROW">
<TD SCOPE="COL" ALIGN="LEFT" VALIGN="TOP">Capacity-based partition creation</TD>
<TD SCOPE="COL" ALIGN="LEFT" VALIGN="TOP">Change all partitions to Read-Write mode.</TD></TR>
<TR SCOPE="ROW" STYLE="CONTSROW">
<TD SCOPE="COL" ALIGN="LEFT" VALIGN="TOP">Date-based partition creation</TD>
<TD SCOPE="COL" ALIGN="LEFT" VALIGN="TOP">Delete all partitions except for the oldest one, change that partition to Read-Write mode, and then change the control rule's trigger date to the original trigger date.</TD></TR>
<TR SCOPE="ROW" STYLE="CONTSROW">
<TD SCOPE="COL" ALIGN="LEFT" VALIGN="TOP">Capacity-based and date-based partition creation</TD>
<TD SCOPE="COL" ALIGN="LEFT" VALIGN="TOP">Delete all partitions except for the oldest one, change that partition to Read-Write mode, and then change the date-based control rule's trigger date to the original trigger date.</TD></TR></TABLE></DIV>
<P><A NAME="TMPID10835"></A>For more information about changing a partition's mode, see <span><A href="../websystemobj/wbs-understandingpartmaps-bg.htm">Working with Partition Maps</A></span>.</P>
<P CLASS="bridgehead-subheading2 BH2SEP"><A NAME="TMP4REF204">Manually Changed Partition Modes</A></P>
<P><A NAME="TMPID10838"></A>If you have manually changed any partition modes to Read-Only, you must change them to Update-Only before re-extracting the data from the source. Similarly, if you have manually changed any partition modes to Read-Only or Update-Only, you must change them to Read-Write before purging the data flow and re-extracting the data from its source.</P>
<table CLASS="warning">
<TR>
<TD FRAME="VOID" CLASS="tabverspace" COLSPAN="2">&nbsp;</TD></TR>
<TR FRAME="VOID">
<TD ALIGN="center" VALIGN="top" CLASS="iconcell">
<P CLASS="warning" ALIGN="CENTER"><IMG ALT="Warning" SRC="../../images/pi_warning.gif"></IMG></P></TD>
<TD ALIGN="LEFT" CLASS="percontscell">
<P><A NAME="TMPID10840"></A><B CLASS="warning">Warning</B><BR>When you change a partition to Read-Only, the Index Engine for that partition shuts itself down and will not index any items that are either updated or deleted.</P></TD></TR>
<TR>
<TD FRAME="VOID" CLASS="tabverspace" COLSPAN="2">&nbsp;</TD></TR></table>
<P><A NAME="TMPID10841"></A>On new and upgraded installations of Content Server Update 10.5, or later, the Search Engine supports a partition in <I CLASS="emphasis">Retired</I> mode. This mode is an alternative to Update, Read/Write or ReadOnly modes. In Retired mode, an   index will accept updates and deletions, but not new objects. In addition, a complete replacement of an object in Retired mode will rebalance the object to another partition and delete it from the original partition.</P>
<DIV CLASS="localtoc">
<h2 CLASS="localtoc BH1SEP pagehd"><A NAME="LOCALTOC"></A>Table of Contents&nbsp;&nbsp;</h2>
<ul>
<li><p><A  href="../otadmin/ota-indexverify-p.htm" revision="">To Configure Search Index Verification</A></p></li>
<li><p><A  href="../otadmin/ota-reindxll-p.htm" revision="">To Re-index the Enterprise Content</A></p></li>
<li><p><A  href="../otadmin/ota-reindxds-p.htm" revision="">To Re-index Content in Non-Enterprise Indexes</A></p></li></ul></DIV>
<P ALIGN="RIGHT"></P></DIV></DIV>

  <script language="JavaScript">
       new AdminFooter("../../images/").draw();
  </script>
</body></HTML>