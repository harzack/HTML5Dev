<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<META NAME="bookrevnum" CONTENT="LLESWBS100500-H-AGD-FR-1">
<META name="pvScheme" content="010203-yymm">
<META name="verttl" content="10.5.0">
<META name="PiXprocLocator" content="websystemobj">
<META mancondkey="lleswbb-h-ugd -- lleswbb-h-agd -- llesels-h-ugd -- llesrec-h-agd -- llesels-h-agd -- llesrt-h-ugd -- llesapp-h-ugd -- lleswba-h-agd -- llescor-igd -- lleselv-h-agd -- lleswbo-h-agd -- llescl-h-agd"><title>Création d'un flux de données producteur XML Activator</title>
<META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.44">
<META NAME="SECTLVL" CONTENT="2">
<LINK REL="STYLESHEET" TYPE="text/css" HREF="../../ix21.css">

<script language="JavaScript" src="../../llhelp.js"></script>
</HEAD>
<body ONLOAD="checkFrame( 'xma-pdataflow-bg.htm' )" CLASS="Body" TEXT="#000000" BGCOLOR="#FFFFFF" link="#003366" alink="#3300FF" vlink="#660033" background="../../images/pattern.gif">

<DIV ID="HL4SRCH">
<DIV CLASS="pagecontent" ID="PAGECONTENT">
<!-- header -->
  <script language="JavaScript">
          var header = new AdminHeader("../../images/");
          header.title1 = 'Création des index à l\'aide de modèles';
          header.title2 = 'Création d\'un flux de données producteur XML Activator';
           header.draw();
  </script>

<P class="nr1"><A NAME="TMPID556"></A>Vous créez un flux de données producteur XML Activator pour indexer les informations générées par une application tierce pour que les utilisateurs Content Server puissent créer une requête sur les informations indexées et voir les résultats dans Content Server.</P>
<P><A NAME="TMPID559"></A>Cette procédure permet de créer et de configurer l'intégralité d'un flux de données, y compris un processus producteur XML Activator, un processus Conversion de documents et un processus Distributeur de mise à jour. Vous pouvez également créer un flux de données et <A href="../websystemobj/wbs-addanyprocs-bg.htm">Ajouter des processus de flux de données</A>.</P>
<P><A NAME="TMPID561"></A>La création d'un flux de données producteur XML Activator s'effectue en quatre étapes.</P>
<P CLASS="bridgehead-boldpara"><A NAME="TMP4REF13">Configuration d'un flux de données producteur XML Activator</A></P>
<P><A NAME="TMPID563"></A>La première étape de la configuration d'un flux de données producteur XML Activator consiste à le nommer et à spécifier les numéros de port associés à ses processus. Vous configurez ensuite les informations du processus producteur XML Activator. Le processus producteur XML Activator extrait les données, sous forme de fichiers XML, depuis votre application tierce et les écrit dans un IPool.</P>
<P><A NAME="TMPID564"></A>Lorsque vous ajoutez un flux de données producteur XML Activator à Content Server, vous pouvez spécifier le nom des balises d'opération et d'identificateur qui peuvent apparaître dans la <A href="../webxmlactivator/xma-xmlapi-rf.htm">configuration requise des fichiers XML Activator</A> transmise via le flux de données. La balise d'opération spécifie l'action effectuée par Content Server sur les données. La balise d'identificateur est une chaîne continuelle et unique qui identifie l'objet de données (contenu inclus dans un fichier XML spécifique).</P>
<P><A NAME="TMPID568"></A>Lorsque vous spécifiez des répertoires sur la page Créer un nouveau flux de données de producteur XML Activator, vous devez indiquer le chemin des répertoires tel qu'il est mappé ou monté sur l'hôte du serveur d'administration dont vous avez sélectionné le raccourci dans la liste déroulante <B CLASS="guilabel">Hôte</B>.</P>
<P CLASS="bridgehead-boldpara"><A NAME="TMP4REF14">Configuration des informations de conversion de documents</A></P>
<P><A NAME="TMPID571"></A>Après avoir configuré un flux de données producteur XML Activator et le processus producteur XML Activator, vous devez configurer les informations intermédiaires de conversion de documents. Le processus Conversion de documents lit les données d'un IPool, les convertit au format HTML et les écrit dans un autre IPool.</P>
<P><A NAME="TMPID572"></A>Lorsque vous spécifiez les répertoires de lecture et d'écriture du processus Conversion de documents, vous devez indiquer le chemin des répertoires tel qu'il est mappé/monté sur l'hôte du serveur d'administration dont vous avez sélectionné le raccourci dans la liste déroulante <B CLASS="guilabel">Hôte</B>.</P>
<P CLASS="bridgehead-boldpara"><A NAME="TMP4REF15">Configuration des informations de mise à jour de l'index</A></P>
<P><A NAME="TMPID575"></A>Après avoir configuré un flux de données producteur XML Activator et les processus producteur XML Activator et Conversion de documents, vous devez configurer le distributeur de mise à jour. Pour plus d'informations sur la configuration des processus de mise à jour d'indexation, reportez-vous à la rubrique <span><A href="../websystemobj/wbs-configindexeng-so.htm">Configuration des processus d'indexation</A></span>.</P>
<P><A NAME="TMPID577"></A>Lorsque vous spécifiez les répertoires de lecture et d'indexation du processus de mise à jour de l'index, vous devez indiquer le chemin des répertoires tel qu'il est mappé/monté sur l'hôte du serveur d'administration dont vous avez sélectionné le raccourci dans la liste déroulante <B CLASS="guilabel">Hôte</B>.</P>
<P CLASS="bridgehead-boldpara"><A NAME="TMP4REF16">Finalisation d'un flux de données producteur XML Activator</A></P>
<P><A NAME="TMPID580"></A>Après avoir configuré un flux de données producteur XML Activator et les processus producteur XML Activator, Conversion de documents et Distributeur de mise à jour, vous pouvez terminer le flux de données producteur XML Activator.</P>
<table CLASS="note">
<TR>
<TD FRAME="VOID" CLASS="tabverspace" COLSPAN="2">&nbsp;</TD></TR>
<TR FRAME="VOID">
<TD ALIGN="LEFT" VALIGN="TOP" CLASS="iconcell">
<P CLASS="note"><A NAME="TMP4REF17"></A><IMG ALT="Note" SRC="../../images/pi_note.gif"></IMG></P></TD>
<TD ALIGN="LEFT" CLASS="percontscell">
<P><A NAME="TMPID582"></A><B CLASS="note">Note : </B><BR>Si vous placez un processus Producteur XML Activator juste avant le processus Conversion HTML dans un flux de données, les valeurs nulles dans les données de contenu ne sont pas codées et l'erreur du processus 54 est générée.</P></TD></TR>
<TR>
<TD FRAME="VOID" CLASS="tabverspace" COLSPAN="2">&nbsp;</TD></TR></table>
<P CLASS="bridgehead-boldpara"><A NAME="TMP4REF18">Création d'un flux de données consommateur XML Activator</A></P>
<P><A NAME="TMPID584"></A>Le consommateur XML Activator traite un IPool, ce qui crée un fichier de sortie pour chaque objet trouvé. L'Activator traite les IPool en lots transactionnels d'environ 1 000 objets, ce qui crée un nouveau sous-répertoire pour chaque lot.</P>
<P><A NAME="TMPID585"></A>Chaque sous-répertoire est nommé en fonction du format : <TT CLASS="literal"> ll_%YY%MM%%DD_%HH%%MM%%SS_N</TT>, où <TT CLASS="literal">YY</TT> correspond à l'année, <TT CLASS="literal">MM</TT> au mois, <TT CLASS="literal">DD</TT> au jour, <TT CLASS="literal">HH</TT> à l'heure, <TT CLASS="literal">MM</TT> à la minute, <TT CLASS="literal">SS</TT> à la seconde à laquelle l'Activator a démarré et <TT CLASS="literal">N</TT> correspond à un numéro à 6 chiffres justifié à gauche commençant par <TT CLASS="literal">000000</TT>.</P>
<P><A NAME="TMPID595"></A>Chaque sous-répertoire contient des fichiers nommés <TT CLASS="literal">N.xml,</TT> où <TT CLASS="literal">N</TT> est un numéro à 3 chiffres justifié à gauche.</P>
<P><A NAME="TMPID598"></A>Un processus tiers devrait traiter tous les répertoires et les fichiers dans un ordre fixé en fonction de la lexicographie ou du moment de la modification. Le processus tiers traite uniquement les fichiers nommés <TT CLASS="literal">*.xml</TT> . Le dernier répertoire qui est encore dans une transaction contient des fichiers nommés <TT CLASS="literal">*.tmp</TT>, qui sont renommés à la fin de la transaction. Le processus tiers devrait supprimer les répertoires contenant uniquement des fichiers <TT CLASS="literal">*.xml</TT> lorsqu'il les traite. L'Activator supprime les fichiers <TT CLASS="literal">*.tmp</TT> pour les transactions ayant échoué.</P>
<P><A NAME="TMPID603"></A>Chaque fichier produit est au format XML UTF-8 et reflète étroitement le contenu d'un message d'objet d'IPool. Un message d'objet d'IPool contient une opération qui indique soit <TT CLASS="literal">AddORReplace</TT> soit <TT CLASS="literal">Delete</TT>, un URN indiquant un nom unique pour l'objet, ainsi qu'une ou plusieurs métadonnées et régions de contenu mélangées. Les régions de métadonnées sont des paires touche/valeur imbriquées. Elles sont presque toutes au format XML, sauf les données ajoutées par certains modules dont le comportement est mauvais (principalement Workflow). Les régions de contenu contiennent soit du texte soit des données binaires.</P>
<P><A NAME="TMPID606"></A>Le fichier XML produit conserve autant que possible la structure des métadonnées d'origine. Lorsqu'une région de texte de métadonnées ne respecte pas la spécification XML, la balise de délimitation la plus proche est marquée comme ayant des données codées <TT CLASS="literal">base64</TT>. Le processus tiers détermine comment gérer les métadonnées comportant une anomalie.</P>
<P><A NAME="TMPID608"></A>La région de contenu est toujours codée <TT CLASS="literal">base64</TT>.</P>
<P><A NAME="TMPID610"></A>Chaque fichier XML produit est au format :</P><A NAME="AEN621"></A>
<PRE 
CLASS="screen"
>  &lt;?xml version="1.0"?&gt;
    &lt;xml_object&gt;
        &lt;operation&gt;AddOrReplace or Delete&lt;/operation&gt;
        &lt;oturn encoding='base64'&gt;base64 encoded urn&lt;/oturn&gt;
        &lt;metadata&gt;
           &lt;field1&gt;....&lt;/field1&gt;
           &lt;field2 encoding='base64'&gt;...&lt;/field2&gt;
           &lt;field3&gt;...&lt;/field3&gt;
           ... 
           &lt;fieldN encoding='base64'&gt;...&lt;/fieldN&gt;
        &lt;/metadata&gt;
        &lt;content encoding='base64'&gt;
           Base64 encoded content. 
        &lt;/content&gt;
        &lt;metadata&gt;
           ... 
        &lt;/metadata&gt;
        &lt;content&gt;
        ... 
        &lt;/content&gt;
       ... 
    &lt;/xml_object&gt;</PRE
>
<DIV CLASS="localtoc">
<h2 CLASS="localtoc BH1SEP pagehd"><A NAME="LOCALTOC"></A>Table des matières&nbsp;&nbsp;</h2>
<ul>
<li><p><A  href="../webxmlactivator/xma-setupxmlactdflw-p.htm" revision="">Pour définir un flux de données producteur XML Activator</A></p></li>
<li><p><A  href="../webxmlactivator/xma-configdocconv-p.htm" revision="">Pour configurer les informations de conversion de documents</A></p></li>
<li><p><A  href="../webxmlactivator/xma-configindinfo-p.htm" revision="">Pour configurer les informations de mise à jour de l'index</A></p></li>
<li><p><A  href="../webxmlactivator/xma-compxmlactdflw-p.htm" revision="">Pour terminer un flux de données producteur XML</A></p></li></ul></DIV>
<P ALIGN="RIGHT"></P></DIV></DIV>

  <script language="JavaScript">
       new AdminFooter("../../images/").draw();
  </script>
</body></HTML>